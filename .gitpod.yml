# .gitpod.yml
image: gitpod/workspace-full:latest

tasks:
  - name: Setup & Run
    init: |
      echo "ğŸ”§ Installing global dependencies..."
      npm install -g truffle
      echo "ğŸ“¦ Installing project dependencies..."
      npm install
    command: |
      echo "ğŸš€ Starting Truffle local blockchain..."
      nohup truffle develop --log &
      echo "ğŸŒ Waiting for blockchain to initialize..."
      sleep 10
      echo "ğŸ’» Starting frontend (React app)..."
      npm start

ports:
  - port: 3000
    onOpen: open-preview
    name: React Frontend
  - port: 8545
    onOpen: ignore
    name: Truffle Blockchain

vscode:
  extensions:
    - JuanBlanco.solidity
    - dbaeumer.vscode-eslint
    - esbenp.prettier-vscode
    - ms-vscode.vscode-typescript-next

env:
  NODE_ENV: development
